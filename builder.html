<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lineup Builder | MCGG Network</title>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="tokens.css">
    <link rel="stylesheet" href="layout.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="builder.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* 1. Paksa panel kiri memunculkan scrollbar */
        .panel--left { 
            min-height: 0 !important; 
        }

        /* 2. Paksa grid menjadi 3 kolom lega dan beri jarak (gap) yang luas */
        .hero-grid {
            display: grid !important;
            grid-template-columns: repeat(3, 1fr) !important;
            gap: 14px !important; 
            padding: 14px !important;
            align-content: start !important;
            min-height: 0 !important;
            overflow-y: auto !important;
        }

        /* 3. Paksa tinggi kartu mengikuti isi, BUKAN melar ketarik ke bawah */
        .hero-card {
            display: block !important;
            height: max-content !important;
            border-radius: 12px !important;
            margin: 0 !important;
        }

        /* 4. KUNCI UTAMA: Paksa wadah gambar menjadi KOTAK SEMPURNA (1:1) */
        .hero-card__img-wrap {
            width: 100% !important;
            aspect-ratio: 1 / 1 !important;
            padding-top: 0 !important; 
            position: relative !important;
            overflow: hidden !important;
        }

        /* 5. Paksa gambar memotong rapi tanpa ngerusak proporsi karakter */
        .hero-card__img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            position: absolute !important;
            top: 0 !important; left: 0 !important;
        }
        
        /* 6. Besarkan teks sedikit agar terbaca jelas */
        .hero-card__name {
            font-size: 11px !important;
            padding-top: 4px !important;
        }
    </style>
</head>
<body class="page page--builder">

    <div id="ambient-system" aria-hidden="true">
        <div class="noise-overlay"></div>
        <div class="blob blob--primary"></div>
        <div class="blob blob--secondary"></div>
    </div>

    <div class="app-shell">

        <aside class="sidebar" role="navigation" aria-label="Side Navigation">
            <a href="index.html" class="sidebar__logo" aria-label="Go to Home">
                <div class="sidebar__logo-icon"><i class="ph-fill ph-hexagon"></i></div>
            </a>
            <nav class="sidebar__nav">
                <ul class="sidebar__list">
                    <li class="sidebar__item">
                        <a href="builder.html" class="sidebar__link sidebar__link--active" title="Lineup Builder">
                            <i class="ph-bold ph-wrench"></i>
                            <span class="sidebar__label">Builder</span>
                        </a>
                    </li>
                    <li class="sidebar__item">
                        <a href="app.html" class="sidebar__link" title="Community Hub">
                            <i class="ph-bold ph-users-three"></i>
                            <span class="sidebar__label">Community</span>
                        </a>
                    </li>
                    <li class="sidebar__item">
                        <a href="#" class="sidebar__link" title="Meta Tier List">
                            <i class="ph-bold ph-chart-line-up"></i>
                            <span class="sidebar__label">Meta</span>
                        </a>
                    </li>
                    <li class="sidebar__item">
                        <a href="#" class="sidebar__link" title="Tournament Brackets">
                            <i class="ph-bold ph-trophy"></i>
                            <span class="sidebar__label">Tourney</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar__footer">
                <button class="sidebar__action" aria-label="Settings"><i class="ph-bold ph-gear"></i></button>
                <button id="sidebar-logout-btn" hidden aria-label="Logout"><i class="ph-bold ph-sign-out"></i></button>
                <button id="sidebar-login-btn" aria-label="Login">
                    <i class="ph-bold ph-sign-in"></i>
                    <span>Login</span>
                </button>
                <div class="sidebar__user">
                    <img src="https://ui-avatars.com/api/?name=Guest&background=27272a&color=71717a" alt="User Profile" class="sidebar__avatar">
                </div>
            </div>
        </aside>

        <main class="main-content main-content--builder">

            <header class="content-header">
                <div class="content-header__title-group">
                    <h1 class="content-header__title">Lineup Builder</h1>
                    <p class="content-header__subtitle">Season 5 ¬∑ Mystic Meow Meta Engine</p>
                </div>
                <div class="content-header__stats">
                    <div class="stat-pill glass-panel">
                        <div class="stat-pill__item">
                            <span class="stat-pill__label">GOLD</span>
                            <span class="stat-pill__value" id="total-gold" style="color:#eab308">0</span>
                        </div>
                        <div class="stat-pill__divider"></div>
                        <div class="stat-pill__item">
                            <span class="stat-pill__label">SLOTS</span>
                            <span class="stat-pill__value" id="population-count">0/10</span>
                        </div>
                    </div>
                    <button class="btn btn--primary" id="share-lineup" title="Salin lineup ke clipboard">
                        <i class="ph-bold ph-copy"></i>
                        <span>Salin Lineup</span>
                    </button>
                </div>
            </header>

            <div class="builder-layout">

                <section class="panel panel--left glass-panel" aria-label="Hero Pool">
                    <div class="panel__header">
                        <div class="search-field--compact">
                            <i class="ph-bold ph-magnifying-glass"></i>
                            <input type="text" id="hero-search" placeholder="Cari hero atau trait‚Ä¶" aria-label="Cari hero">
                        </div>
                    </div>
                    <div class="panel__filters">
                        <button class="filter-chip filter-chip--active" data-cost="all">Semua</button>
                        <button class="filter-chip" data-cost="1">1‚òÖ</button>
                        <button class="filter-chip" data-cost="2">2‚òÖ</button>
                        <button class="filter-chip" data-cost="3">3‚òÖ</button>
                        <button class="filter-chip" data-cost="4">4‚òÖ</button>
                        <button class="filter-chip" data-cost="5">5‚òÖ</button>
                    </div>
                    <div class="hero-grid custom-scroll" id="hero-pool"></div>
                    <div class="panel__footer">
                        <span id="hero-pool-count" class="pool-count"></span>
                    </div>
                </section>

                <section class="panel panel--center" aria-label="Battle Board">
                    <div class="arena">
                        <div class="zone-label zone-label--enemy">
                            <i class="ph-bold ph-skull"></i> Area Lawan
                        </div>
                        <div class="arena__board" id="chess-board"></div>
                        <div class="zone-label zone-label--player">
                            <i class="ph-bold ph-shield-chevron"></i> Area Kita
                        </div>
                        <div class="arena__controls">
                            <button class="arena__btn" id="clear-board">
                                <i class="ph-bold ph-trash"></i>
                                <span>Reset Board</span>
                            </button>
                        </div>
                    </div>
                    <p class="board-hint">
                        <i class="ph-bold ph-cursor-click"></i> Klik hero untuk menempatkan &nbsp;¬∑&nbsp;
                        <i class="ph-bold ph-arrows-out-cardinal"></i> Drag token untuk pindah &nbsp;¬∑&nbsp;
                        <i class="ph-bold ph-mouse-right-click"></i> Klik kanan untuk hapus
                    </p>
                </section>

                <section class="panel panel--right glass-panel" aria-label="Synergy Tracker">
                    <div class="analysis">
                        <h3 class="analysis__title">Synergy Tracker</h3>
                        <div class="synergy-list custom-scroll" id="synergy-display">
                            <div class="empty-state">
                                <i class="ph-duotone ph-circles-three-plus"></i>
                                <p>Tempatkan hero di area kita untuk menghitung sinergi</p>
                            </div>
                        </div>
                        <div class="glory-league-panel">
                            <div class="glory-league-panel__header">
                                <i class="ph-fill ph-crown"></i>
                                <span>Glory League Bonus</span>
                            </div>
                            <div class="gl-select-group">
                                <label for="gl-select-1g" class="gl-label">
                                    <i class="ph-bold ph-number-circle-one"></i> Slot 1-Gold
                                </label>
                                <select id="gl-select-1g" class="gl-select"></select>
                            </div>
                            <div class="gl-select-group">
                                <label for="gl-select-5g" class="gl-label">
                                    <i class="ph-bold ph-number-circle-five"></i> Slot 5-Gold
                                </label>
                                <select id="gl-select-5g" class="gl-select"></select>
                            </div>
                            <p class="gl-hint">Jika hero terpilih ada di board, +1 poin Glory League ditambahkan.</p>
                        </div>
                        <div class="meow-status glass-panel" id="meow-indicator">
                            <div class="meow-status__icon">üê±</div>
                            <div class="meow-status__info">
                                <span class="meow-status__title">Mystic Meow</span>
                                <span class="meow-status__desc">Tidak aktif (0/9 tipe trait aktif)</span>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <script type="module" src="builder.js"></script>
</body>
</html>